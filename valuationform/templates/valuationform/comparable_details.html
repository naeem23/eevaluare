{% extends "base.html" %}

{% block title %} Detalii Comparabile {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
    {% load static %}
    <!-- bootstrap datepicker  -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/css/datepicker.min.css" rel="stylesheet">

    <style>
        .ms-choice {
            background: transparent;
            border: none;
            height: 19px;
        }
        .ms-choice>span {
            color: #fff;
            top: 5px;
            left: 8px;
        }
        .ms-drop {
            left: 0;
        }
        .ms-drop span {
            color: #1a2035!important;
        }
        .table td {
            border-bottom: none!important;
            height: 40px!important;
            padding-top: 8px!important;
        }
        .card-header .fa {
            margin-top: 30%;
        }
    </style>
{% endblock stylesheets %}

{% block content %}

    <div class="content">
        <div class="page-inner">
            <div class="page-header">
                <h4 class="page-title">Proprietati Comparabile</h4>
                <ul class="breadcrumbs">
                    <li class="nav-home">
                        <a href="#">
                            <i class="flaticon-home"></i>
                        </a>
                    </li>
                    <li class="separator">
                        <i class="flaticon-right-arrow"></i>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'dashboard:comparable_list' %}">Proprietati Comparabile</a>
                    </li>
                    <li class="separator">
                        <i class="flaticon-right-arrow"></i>
                    </li>
                    <li class="nav-item">
                        <a href="">Detalii Comparabile</a>
                    </li>
                </ul>
            </div>
            
            {% load my_filters %}
            <div class="card">
                <div class="card-header">
                    <div class="d-flex align-items-center">
                        <h4 class="card-title">Detalii Comparabile</h4>
                        <a href="{% url 'dashboard:edit_comparable' id=comparable.id %}" class="ml-auto btn btn-icon btn-round btn-primary">
                            <i class="fa fa-plus"></i>
                        </a>
                    </div>
                </div>

                <div class="card-body">
                    {% if comparable.is_comparable %}
                    <table class="table table-hover">
                        <tbody>
                            <tr>
                                <td colspan="2" style="text-align: center;color: #fff;font-weight: bold;">Proprietate Comparabile</td>
                            </tr>
                            <tr>
                                <td style="color: #fff;font-weight: bold;">Element de comparatie</td>
                                <td style="color: #fff;font-weight: bold;">Element Value</td>
                            </tr>
                            <tr>
                                <td>Preţ de oferta/vanzare (EURO) <span class="required-label">*</span></td>
                                <td>{{ comparable.sale_price|floatformat:"0" }}</td>
                            </tr>
                            <tr>
                                <td>Mobila</td>
                                <td>{{ comparable.get_mobila_display }}</td>
                            </tr>
                            <tr>
                                <td>Loc de parcare/boxa</td>
                                <td>{{ comparable.parking_boxa }}</td>
                            </tr>
                            <tr>
                                <td>Date disponibile</td>
                                <td>{{comparable.get_available_data_display}}</td>
                            </tr>
                            <tr>
                                <td colspan="2" style="text-align: center;color: #fff;font-weight: bold; padding-top: 20px!important;">Ajustari pentru conditiile tranzactiilor</td>
                            </tr>
                            <tr>
                                <td>Drepturi de proprietate</td>
                                <td>{{ comparable.get_property_rights_display }}</td>
                            </tr>
                            <tr>
                                <td>Condiţii de finanţare</td>
                                <td>{{ comparable.get_financing_condition_display }}</td>
                            </tr>
                            <tr>
                                <td>Conditii de vanzare</td>
                                <td>{{ comparable.get_sale_condition_display }}</td>
                            </tr>
                            <tr>
                                <td>Cheltuieli necesare imediat dupa cumparare</td>
                                <td>{{ comparable.get_ape_display }}</td>
                            </tr>
                            <tr>
                                <td>Conditii de piata</td>
                                <td>{{comparable.market_env}}</td>
                            </tr>
                            <tr>
                                <td colspan="2" style="text-align: center;color: #fff;font-weight: bold; padding-top: 20px!important;">Ajustari specifice proprietatii</td>
                            </tr>
                            <tr>
                                <td>Localizare</td>
                                <td>{{comparable.location}}</td>
                            </tr>
                            <tr>
                                <td>Compartimentare</td>
                                <td>{{comparable.get_compartment_display }}</td>
                            </tr>
                            <tr>
                                <td>AN PIF</td>
                                <td>{{comparable.year_build}}</td>
                            </tr>
                            <tr>
                                <td>Suprafata utila (mp)</td>
                                <td>{{comparable.area}}</td>
                            </tr>
                            <tr>
                                <td>Chirie/mp</td>
                                <td>{{comparable.rent_sqm}}</td>
                            </tr>
                            <tr>
                                <td>Finisaje</td>
                                <td>{{comparable.get_finish_display}}</td>
                            </tr>
                            <tr>
                                <td>Regim de inaltime</td>
                                <td>{{ comparable.etaj}}</td>
                            </tr>
                            <tr>
                                <td>Balcon (mp)</td>
                                <td>{{comparable.balcon}}</td>
                            </tr>
                            <tr>
                                <td>Sistem de incalzire</td>
                                <td>{{comparable.get_heating_display}}</td>
                            </tr>
                            <tr>
                                <td>Parcare</td>
                                <td>{{comparable.parking}}</td>
                            </tr>
                            <tr>
                                <td>Camara</td>
                                <td>{% if camara %}{{comparable.camara}}{% else %}Nu{% endif %}</td>
                            </tr>
                        </tbody>
                    </table>
                    {% else %}
                    <table class="table table-hover">
                        <tbody>
                            <tr>
                                <td colspan="2" style="text-align: center;color: #fff;font-weight: bold; padding-top: 20px!important;">Ajustari pentru conditiile tranzactiilor</td>
                            </tr>
                            <tr>
                                <td style="color: #fff;font-weight: bold;">Element de comparatie</td>
                                <td style="color: #fff;font-weight: bold;">Element Value</td>
                            </tr>
                            <tr>
                                <td>Drepturi de proprietate</td>
                                <td>{{ comparable.get_property_rights_display }}</td>
                            </tr>
                            <tr>
                                <td>Condiţii de finanţare</td>
                                <td>{{ comparable.get_financing_condition_display }}</td>
                            </tr>
                            <tr>
                                <td>Conditii de vanzare</td>
                                <td>{{ comparable.get_sale_condition_display }}</td>
                            </tr>
                            <tr>
                                <td>Cheltuieli necesare imediat dupa cumparare</td>
                                <td>{{ comparable.get_ape_display }}</td>
                            </tr>
                            <tr>
                                <td>Conditii de piata</td>
                                <td>{{comparable.market_env}}</td>
                            </tr>
                            <tr>
                                <td colspan="2" style="text-align: center;color: #fff;font-weight: bold; padding-top: 20px!important;">Ajustari specifice proprietatii</td>
                            </tr>
                            <tr>
                                <td>Localizare</td>
                                <td>{{comparable.location}}</td>
                            </tr>
                            <tr>
                                <td>Compartimentare</td>
                                <td>{{comparable.get_compartment_display }}</td>
                            </tr>
                            <tr>
                                <td>AN PIF</td>
                                <td>{{comparable.year_build}}</td>
                            </tr>
                            <tr>
                                <td>Suprafata utila (mp)</td>
                                <td>{{comparable.area}}</td>
                            </tr>
                            <tr>
                                <td>Chirie/mp</td>
                                <td>{{comparable.rent_sqm}}</td>
                            </tr>
                            <tr>
                                <td>Finisaje</td>
                                <td>{{comparable.get_finish_display}}</td>
                            </tr>
                            <tr>
                                <td>Regim de inaltime</td>
                                <td>{{ comparable.etaj}}</td>
                            </tr>
                            <tr>
                                <td>Balcon (mp)</td>
                                <td>{{comparable.balcon}}</td>
                            </tr>
                            <tr>
                                <td>Price per sqm</td>
                                <td>{{comparable.price_persqm|floatformat:"0"}}</td>
                            </tr>
                            <tr>
                                <td>Sistem de incalzire</td>
                                <td>{{comparable.get_heating_display}}</td>
                            </tr>
                            <tr>
                                <td>Parcare</td>
                                <td>{{comparable.parking}}</td>
                            </tr>
                            <tr>
                                <td>Camara</td>
                                <td>{% if camara %}{{comparable.camara}}{% else %}Nu{% endif %}</td>
                            </tr>
                        </tbody>
                    </table>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
    <!-- bootstrap datepicker  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/js/bootstrap-datepicker.min.js"></script>
    
    <script>
        $("#market_env").datepicker( {
            format: "MM yyyy",
            startView: "months", 
            minViewMode: "months"
        });

        // creating notification
        var msg = "{% if msg %}{{msg}}{% endif %}"
        if(msg !== "") {
            var content = {};
            if (msg == 'updated') {
                var state = "success";
                content.message = 'Comparabile updated successfully.';
                content.title = 'Success!';
            }

            content.icon = 'fa fa-bell';
            $.notify(content,{
                type: state,
                placement: {
                    from: 'top',
                    align: 'right'
                },
                time: 1000,
                delay: 0,
            });
            // closing notification
            setTimeout(function(){
                $('.close').trigger('click');
            }, 4000);
        }
    </script>
{% endblock javascripts %}  
