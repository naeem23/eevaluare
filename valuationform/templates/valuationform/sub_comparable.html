{% extends "base-form.html" %}

{% block title %} {% if instance %} Edit Comparabile {% else %} Add Comparabile {% endif %} {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
    {% load static %}
    <!-- bootstrap datepicker  -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/css/datepicker.min.css" rel="stylesheet">

    <style>
        .ms-choice {
            background: transparent;
            border: none;
            height: 19px;
        }
        .ms-choice>span {
            color: #fff;
            top: 5px;
            left: 8px;
        }
        .ms-drop {
            left: 0;
        }
        .ms-drop span {
            color: #1a2035!important;
        }
        .table td {
            border-bottom: none!important;
            height: 40px!important;
            padding-top: 8px!important;
        }
    </style>
{% endblock stylesheets %}

{% block content %}

    <div class="content">
        <div class="page-inner">
            <div class="page-header">
                <h4 class="page-title"> {% if instance %} Edit Comparabile {% else %} Add Comparabile {% endif %} </h4>
                <ul class="breadcrumbs">
                    <li class="nav-home">
                        <a href="#">
                            <i class="flaticon-home"></i>
                        </a>
                    </li>
                    <li class="separator">
                        <i class="flaticon-right-arrow"></i>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'dashboard:comparable_list' %}">Proprietati Comparabile</a>
                    </li>
                    <li class="separator">
                        <i class="flaticon-right-arrow"></i>
                    </li>
                    <li class="nav-item">
                        <a href=""> {% if instance %} Edit Comparabile {% else %} Add Comparabile {% endif %} </a>
                    </li>
                </ul>
            </div>
            
            {% load my_filters %}
            <div class="card">
                <div class="card-header">
                    <div class="card-title"> {% if instance %} Edit Comparabile {% else %} Add Comparabile {% endif %} </div>
                </div>
                
                <form method="POST">
                    {% csrf_token %}

                    <div class="card-body">
                        {% if msg %}
                            <p class="text-danger">{{ msg }}</p>
                        {% endif %}
                        <table class="table table-hover">
                            <tbody>
                                <tr>
                                    <td colspan="2" style="text-align: center;color: #fff;font-weight: bold; padding-top: 20px!important;">Ajustari pentru conditiile tranzactiilor</td>
                                </tr>
                                <tr>
                                    <td style="color: #fff;font-weight: bold;">Element de comparatie</td>
                                    <td style="color: #fff;font-weight: bold;">Element Value</td>
                                </tr>
                                <tr>
                                    <td>Drepturi de proprietate <span class="required-label">*</span></td>
                                    <td>{{ form.property_rights }}</td>
                                </tr>
                                <tr>
                                    <td>Condiţii de finanţare <span class="required-label">*</span></td>
                                    <td>{{ form.financing_condition }}</td>
                                </tr>
                                <tr>
                                    <td>Conditii de vanzare <span class="required-label">*</span></td>
                                    <td>{{ form.sale_condition }}</td>
                                </tr>
                                <tr>
                                    <td>Cheltuieli necesare imediat dupa cumparare <span class="required-label">*</span></td>
                                    <td>{{ form.ape }}</td>
                                </tr>
                                <tr>
                                    <td>Conditii de piata <span class="required-label">*</span></td>
                                    <td>
                                        {% if instance %}
                                        <input type="text" class="form-control" name="market_env" id="market_env" value="{{ instance.market_env }}"/>
                                        {% else %}
                                        <input type="text" class="form-control" name="market_env" id="market_env"/>
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2" style="text-align: center;color: #fff;font-weight: bold; padding-top: 20px!important;">Ajustari specifice proprietatii</td>
                                </tr>
                                <tr>
                                    <td>Localizare <span class="required-label">*</span></td>
                                    <td><input type="text" name="location" class="form-control" required="" id="id_location" value="{{ valuation.street }}"></td>
                                </tr>
                                <tr>
                                    <td>Compartimentare <span class="required-label">*</span></td>
                                    <td>
                                        <select name="compartment" class="form-control" id="id_compartment">
                                            <option value="decomandat" {% if valuation.apartment_type == 'decomandat' %}selected{% endif %}>Decomandat</option>
                                            <option value="semidecomandat" {% if valuation.apartment_type == 'semidecomandat' %}selected{% endif %}>Semidecomandat</option>
                                            <option value="nedecomandat" {% if valuation.apartment_type == 'nedecomandat' %}selected{% endif %}>Neecomandat</option>
                                            <option value="circular" {% if valuation.apartment_type == 'circular' %}selected{% endif %}>Circular</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>AN PIF <span class="required-label">*</span></td>
                                    <td><input type="text" name="year_build" class="form-control" required="" id="id_year_build" value="{{const.build_in}}"></td>
                                </tr>
                                <tr>
                                    <td>Suprafata utila (mp) <span class="required-label">*</span></td>
                                    <td><input type="number" name="area" class="form-control" step="0.01" required="" id="id_area" value="{{utila.utila}}"></td>
                                </tr>
                                <tr>
                                    <td>Chirie/mp <span class="required-label">*</span></td>
                                    <td>{{form.rent_sqm}}</td>
                                </tr>
                                <tr>
                                    <td>Finisaje <span class="required-label">*</span></td>
                                    <td>
                                        <select name="finish" class="form-control" id="id_finish">
                                            <option value="medii" {% if const.finish == 'medii' %}selected{% endif %}>Medii</option>
                                            <option value="bune" {% if const.finish == 'bune' %}selected{% endif %}>Bune</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Regim de inaltime <span class="required-label">*</span></td>
                                    <td><input type="text" name="etaj" class="form-control" maxlength="55" required="" id="id_etaj" value="{{const.etaj}}"></td>
                                </tr>
                                <tr>
                                    <td>Balcon (mp) <span class="required-label">*</span></td>
                                    <td><input type="number" name="balcon" class="form-control" step="0.01" required="" id="id_balcon" value="{{balcon.balcon}}"></td>
                                </tr>
                                <tr>
                                    <td>Price per sqm <span class="required-label">*</span></td>
                                    <td><input type="number" name="price_persqm" class="form-control" step="0.01" required="" id="id_price_persqm"></td>
                                </tr>
                                <tr>
                                    <td>Sistem de incalzire <span class="required-label">*</span></td>
                                    <td>
                                        <select name="heating" class="form-control" id="id_heating">
                                            <option value="calorifere" {% if const.heating == 'calorifere' %}selected{% endif %}>Calorifere</option>
                                            <option value="ct" {% if const.heating == 'ct' %}selected{% endif %}>Conectate la termoficare</option>
                                            <option value="ctp" {% if const.heating == 'ctp' %}selected{% endif %}>Centrala termica proprie</option>
                                            <option value="ctb" {% if const.heating == 'ctb' %}selected{% endif %}>Centrala termica a blocului</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Parcare <span class="required-label">*</span></td>
                                    <td>
                                        {% if parking %}
                                        <input type="text" name="parking" class="form-control" maxlength="55" required="" id="id_parking" value="{{parking|tip_parcare}}">
                                        {% else %}
                                        <input type="text" name="parking" class="form-control" maxlength="55" required="" id="id_parking" value="Nu">
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr>
                                    <td>Camara</td>
                                    <td>{{form.camara}}</td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="form-check">
                                            <label class="form-check-label">
                                                <input class="form-check-input" type="checkbox" name="is_comparable">
                                                <span class="form-check-sign text-light">Face comparabile</span>
                                            </label>
                                        </div>
                                    </td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="card-action">
                        <button class="btn btn-success" type="submit">{% if instance %}Update{% else %}Save{% endif %}</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
    <!-- bootstrap datepicker  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/js/bootstrap-datepicker.min.js"></script>
    
    <script>
        $("#market_env").datepicker( {
            format: "MM yyyy",
            startView: "months", 
            minViewMode: "months"
        });
    </script>
{% endblock javascripts %}  
