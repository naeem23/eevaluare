{% extends "base.html" %}

{% block title %} Comparabile Table {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
    {% load static %}
    <!-- bootstrap datepicker  -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/css/datepicker.min.css" rel="stylesheet">

    <style>
        .ms-choice {
            background: transparent;
            border: none;
            height: 19px;
        }
        .ms-choice>span {
            color: #fff;
            top: 5px;
            left: 8px;
        }
        .ms-drop {
            left: 0;
        }
        .ms-drop span {
            color: #1a2035!important;
        }
        .table td {
            padding: 0 5px!important;
            height: 40px!important;
        }
        #refresh {
            cursor: pointer;
        }
        .form-control[readonly] {
            background: transparent!important;
            border: none!important;
            border-color: transparent!important;
        }
    </style>
{% endblock stylesheets %}

{% block content %}

    <div class="content">
        <div class="page-inner">
            <div class="page-header">
                <h4 class="page-title">Comparabile Table</h4>
                <ul class="breadcrumbs">
                    <li class="nav-home">
                        <a href="#">
                            <i class="flaticon-home"></i>
                        </a>
                    </li>
                    <li class="separator">
                        <i class="flaticon-right-arrow"></i>
                    </li>
                    <li class="nav-item">
                        <a href="">Comparabile Table</a>
                    </li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">Comparable Selection</div>
                </div>

                {% load my_filters %}
                <form method="POST">
                    {% csrf_token %}

                    <div class="card-body">
                        <table class="table table-bordered">
                            <tbody>
                                <tr>
                                    <td colspan="{{nr_comp|add:'2'}}" class="text-center text-light font-weight-bold">ABORDAREA PRIN PIATA, METODA COMPARATIILOR DE PIATA (LOCUINTA UNIFAMILIALA)</td>
                                </tr>
                                <tr>
                                    <td class="text-center text-light font-weight-bold">Element de comparatie</td>
                                    <td class="text-center text-light font-weight-bold">Subject</td>
                                    <td class="text-center text-light font-weight-bold" colspan="{{nr_comp}}">Proprietati comparabile</td>
                                </tr>
                                <tr>
                                    <td>&nbsp;</td>
                                    <td>&nbsp;</td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td class="text-center text-light font-weight-bold">ID-{{forloop.counter}}</td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td class="text-center text-light font-weight-bold">ID-{{forloop.counter}}</td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td class="text-center text-light font-weight-bold">ID-{{n}}</td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td class="text-center text-light font-weight-bold">ID-{{n|add:"1"}}</td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Preţ de oferta/vanzare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td><input type="number" name="sale_price[]" class="form-control" step="0.01" value="{{n.sale_price}}" id="sp_{{forloop.counter}}"></td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td><input type="number" name="sale_price[]" class="form-control" step="0.01" value="{{n.sale_price}}" id="sp_{{forloop.counter}}"></td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="sale_price[]" class="form-control" step="0.01" id="sp_{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="sale_price[]" class="form-control" step="0.01" id="sp_{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td rowspan="3" class="text-center">Componente non imobiliare</td>
                                    <td class="text-center" rowspan="2">Mobila</td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_mobila" class="form-control" name="mobila[]">
                                                    {% for mt in mobila %}
                                                    <option value="{{mt.type}}" {% if n.mobila == mt.type %}selected{% endif %}>{{mt.type}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_mobila" class="form-control" name="mobila[]">
                                                    {% for mt in mobila %}
                                                    <option value="{{mt.type}}" {% if n.mobila == mt.type %}selected{% endif %}>{{mt.type}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <select id="id_mobila" class="form-control" name="mobila[]">
                                                    {% for mt in mobila %}
                                                    <option value="{{mt.type}}">{{mt.type}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <select id="id_mobila" class="form-control" name="mobila[]">
                                                {% for mt in mobila %}
                                                <option value="{{mt.type}}">{{mt.type}}</option>
                                                {% endfor %}
                                            </select>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="ma[]" id="ma_{{forloop.counter}}" class="form-control" step="0.01" value="{{n.ma}}">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="ma[]" id="ma_{{forloop.counter}}" class="form-control" step="0.01" value="{{n.ma}}">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="number" name="ma[]" id="ma_{{forloop.counter}}" class="form-control" step="0.01">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="number" name="ma[]" id="ma_{{forloop.counter}}" class="form-control" step="0.01">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td rowspan="2">Loc de parcare/boxa</td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" name="parking_boxa[]" class="form-control" value="{{n.parking_boxa}}">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" name="parking_boxa[]" class="form-control" value="{{n.parking_boxa}}">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="text" name="parking_boxa[]" class="form-control">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="text" name="parking_boxa[]" class="form-control">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td class="text-center">Ajustare (EUR)</td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="pba[]" class="form-control" step="0.01" value="{{n.pba}}" id="pba_{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="pba[]" class="form-control" step="0.01" value="{{n.pba}}" id="pba_{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="number" name="pba[]" class="form-control" step="0.01" id="pba_{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="number" name="pba[]" class="form-control" step="0.01" id="pba_{{forloop.counter}}">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Pret de oferta/vanzare imobil (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="op[]" class="form-control" step="0.01" id="op_{{forloop.counter}}" value="{% if n.sale_price and n.ma and n.pba %}{{n|get_offer_price}}{% endif %}">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="op[]" class="form-control" step="0.01" id="op_{{forloop.counter}}" value="{% if n.sale_price and n.ma and n.pba %}{{n|get_offer_price}}{% endif %}">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="number" name="op[]" class="form-control" step="0.01" id="op_{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="number" name="op[]" class="form-control" step="0.01" id="op_{{forloop.counter}}" value="">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>

                                <tr>
                                    <td>Date disponibile</td>
                                    <td>
                                        <select id="id_sub_avdata" class="form-control" name="sub_avdata">
                                            <option value="Tranzactie">Tranzactie</option>
                                            <option value="Oferta">Oferta</option>
                                        </select>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_ad" class="form-control" name="ad[]">
                                                    <option value="Oferta" {% if n.ad == 'Oferta' %}selected{% endif%}>Oferta</option>
                                                    <option value="Tranzactie" {% if n.ad == 'Tranzactie' %}selected{% endif%}>Tranzactie</option>
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_ad" class="form-control" name="ad[]">
                                                    <option value="Oferta" {% if n.ad == 'Oferta' %}selected{% endif%}>Oferta</option>
                                                    <option value="Tranzactie" {% if n.ad == 'Tranzactie' %}selected{% endif%}>Tranzactie</option>
                                                </select>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <select id="id_ad" class="form-control" name="ad[]">
                                                    <option value="Oferta">Oferta</option>
                                                    <option value="Tranzactie">Tranzactie</option>
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <select id="id_ad" class="form-control" name="ad[]">
                                                <option value="Oferta">Oferta</option>
                                                <option value="Tranzactie">Tranzactie</option>
                                            </select>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Marja negociere (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="margin[]" class="form-control" step="0.01" value="{{n.margin}}" id="margin_{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="margin[]" class="form-control" step="0.01" value="{{n.margin}}" id="margin_{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="margin[]" class="form-control" step="0.01" id="margin_{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="margin[]" class="form-control" step="0.01" id="margin_{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Valoare corectie (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td><input type="number" name="cv[]" class="form-control" step="0.01" value="{{n.cv}}" id="cv_{{forloop.counter}}"></td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td><input type="number" name="cv[]" class="form-control" step="0.01" value="{{n.cv}}" id="cv_{{forloop.counter}}"></td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="cv[]" class="form-control" step="0.01" id="cv_{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="cv[]" class="form-control" step="0.01" id="cv_{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Pret corectat (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="mp[]" class="form-control" step="0.01" id="mp_{{forloop.counter}}" value="">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="mp[]" class="form-control" step="0.01" id="mp_{{forloop.counter}}" value="">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="number" name="mp[]" class="form-control" step="0.01" id="mp_{{forloop.counter}}" value="">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="number" name="mp[]" class="form-control" step="0.01" id="mp_{{forloop.counter}}" value="">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="motivation" rows="5" class="form-control"></textarea></td>
                                </tr>

                                <tr>
                                    <td colspan="{{nr_comp|add:'2'}}" class="text-center text-light font-weight-bold">Ajustari pentru conditiile tranzactiilor</td>
                                </tr>
                                <tr>
                                    <td>Drepturi de proprietate</td>
                                    <td>
                                        <select id="id_sub_pr" class="form-control" name="sub_pr">
                                            {% for p in prop_rights %}
                                            <option value="{{p.type}}">{{p.type}}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_pr" class="form-control" name="pr[]">
                                                    {% for p in prop_rights %}
                                                    <option value="{{p.type}}" {% if n.pr == p.type %}selected{% endif%}>{{p.type}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_pr" class="form-control" name="pr[]">
                                                    {% for p in prop_rights %}
                                                    <option value="{{p.type}}" {% if n.pr == p.type %}selected{% endif%}>{{p.type}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <select id="id_pr" class="form-control" name="pr[]">
                                                        {% for p in prop_rights %}
                                                        <option value="{{p.type}}">{{p.type}}</option>
                                                        {% endfor %}
                                                    </select>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <select id="id_pr" class="form-control" name="pr[]">
                                                    {% for p in prop_rights %}
                                                    <option value="{{p.type}}">{{p.type}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="pr_percent[]" class="form-control" step="0.01" id="pr_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="pr_percent[]" class="form-control" step="0.01" id="pr_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="pr_percent[]" class="form-control" step="0.01" id="pr_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="property_percent[]" class="form-control" step="0.01" id="pr_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="pr_euro[]" class="form-control" step="0.01" id="pr_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="pr_euro[]" class="form-control" step="0.01" id="pr_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="pr_euro[]" class="form-control" step="0.01" id="pr_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="pr_euro[]" class="form-control" step="0.01" id="pr_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Pret ajustat (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="pr_price[]" class="form-control" step="0.01" id="pr_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="pr_price[]" class="form-control" step="0.01" id="pr_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="number" name="pr_price[]" class="form-control" step="0.01" id="pr_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="number" name="pr_price[]" class="form-control" step="0.01" id="pr_price{{forloop.counter}}">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="pr_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>

                                <tr>
                                    <td>Condiţii de finanţare</td>
                                    <td>
                                        <select id="id_sub_fc" class="form-control" name="sub_fc">
                                            <option value="normale">Normale</option>
                                        </select>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_fc" class="form-control" name="fc[]">
                                                    <option value="normale">Normale</option>
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_fc" class="form-control" name="fc[]">
                                                    <option value="normale">Normale</option>
                                                </select>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <select id="id_fc" class="form-control" name="fc[]">
                                                    <option value="normale">Normale</option>
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <select id="id_fc" class="form-control" name="fc[]">
                                                <option value="normale">Normale</option>
                                            </select>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="fc_percent[]" class="form-control" step="0.01" id="fc_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="fc_percent[]" class="form-control" step="0.01" id="fc_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="fc_percent[]" class="form-control" step="0.01" id="fc_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="fc_percent[]" class="form-control" step="0.01" id="fc_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="fc_euro[]" class="form-control" step="0.01" id="fc_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="fc_euro[]" class="form-control" step="0.01" id="fc_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="fc_euro[]" class="form-control" step="0.01" id="fc_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="fc_euro[]" class="form-control" step="0.01" id="fc_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Pret ajustat (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="fc_price[]" class="form-control" step="0.01" id="fc_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="fc_price[]" class="form-control" step="0.01" id="fc_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="number" name="fc_price[]" class="form-control" step="0.01" id="fc_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="number" name="fc_price[]" class="form-control" step="0.01" id="fc_price{{forloop.counter}}">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="fc_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>

                                <tr>
                                    <td>Conditii de vanzare</td>
                                    <td>
                                        <select id="id_sub_sc" class="form-control" name="sub_sc">
                                            <option value="independente">Independente</option>
                                        </select>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_sc" class="form-control" name="sc[]">
                                                    <option value="independente">Independente</option>
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_sc" class="form-control" name="sc[]">
                                                    <option value="independente">Independente</option>
                                                </select>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <select id="id_sc" class="form-control" name="sc[]">
                                                    <option value="independente">Independente</option>
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <select id="id_sc" class="form-control" name="sc[]">
                                                <option value="independente">Independente</option>
                                            </select>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="sc_percent[]" class="form-control" step="0.01" id="sc_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="sc_percent[]" class="form-control" step="0.01" id="sc_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="sc_percent[]" class="form-control" step="0.01" id="sc_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="sc_percent[]" class="form-control" step="0.01" id="sc_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="sc_euro[]" class="form-control" step="0.01" id="sc_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="sc_euro[]" class="form-control" step="0.01" id="sc_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="sc_euro[]" class="form-control" step="0.01" id="sc_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="sc_euro[]" class="form-control" step="0.01" id="sc_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Pret ajustat (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="sc_price[]" class="form-control" step="0.01" id="sc_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="sc_price[]" class="form-control" step="0.01" id="sc_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="number" name="sc_price[]" class="form-control" step="0.01" id="sc_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="number" name="sc_price[]" class="form-control" step="0.01" id="sc_price{{forloop.counter}}">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="sc_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>

                                <tr>
                                    <td>Cheltuieli necesare imediat dupa cumparare</td>
                                    <td>
                                        <select id="id_sub_ape" class="form-control" name="sub_ape">
                                            <option value="da">Da</option>
                                            <option value="nu">Nu</option>
                                        </select>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_ape" class="form-control" name="ape[]">
                                                    <option value="da">Da</option>
                                                    <option value="nu">Nu</option>
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_ape" class="form-control" name="ape[]">
                                                    <option value="da">Da</option>
                                                    <option value="nu">Nu</option>
                                                </select>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <select id="id_ape" class="form-control" name="ape[]">
                                                    <option value="da">Da</option>
                                                    <option value="nu">Nu</option>
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <select id="id_ape" class="form-control" name="ape[]">
                                                <option value="da">Da</option>
                                                <option value="nu">Nu</option>
                                            </select>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="ape_percent[]" class="form-control" step="0.01" id="ape_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="ape_percent[]" class="form-control" step="0.01" id="ape_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="ape_percent[]" class="form-control" step="0.01" id="ape_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="ape_percent[]" class="form-control" step="0.01" id="ape_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="ape_euro[]" class="form-control" step="0.01" id="ape_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="ape_euro[]" class="form-control" step="0.01" id="ape_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="ape_euro[]" class="form-control" step="0.01" id="ape_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="ape_euro[]" class="form-control" step="0.01" id="ape_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Pret ajustat (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="ape_price[]" class="form-control" step="0.01" id="ape_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="ape_price[]" class="form-control" step="0.01" id="ape_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="number" name="ape_price[]" class="form-control" step="0.01" id="ape_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="number" name="ape_price[]" class="form-control" step="0.01" id="ape_price{{forloop.counter}}">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="ape_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>

                                <tr>
                                    <td>Conditii de piata</td>
                                    <td>
                                        <input type="text" class="form-control" name="sub_me" id="id_sub_me"/>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" class="form-control market_env" name="me[]"/>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" class="form-control market_env" name="me[]"/>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="text" class="form-control market_env" name="me[]"/>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="text" class="form-control market_env" name="me[]"/>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="me_percent[]" class="form-control" step="0.01" id="me_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="me_percent[]" class="form-control" step="0.01" id="me_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="me_percent[]" class="form-control" step="0.01" id="me_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="me_percent[]" class="form-control" step="0.01" id="me_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="me_euro[]" class="form-control" step="0.01" id="me_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="me_euro[]" class="form-control" step="0.01" id="me_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="me_euro[]" class="form-control" step="0.01" id="me_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="me_euro[]" class="form-control" step="0.01" id="me_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Pret ajustat (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="me_price[]" class="form-control" step="0.01" id="me_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="me_price[]" class="form-control" step="0.01" id="me_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="number" name="me_price[]" class="form-control" step="0.01" id="me_price{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="number" name="me_price[]" class="form-control" step="0.01" id="me_price{{forloop.counter}}">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="me_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>

                                <tr>
                                    <td colspan="{{nr_comp|add:'2'}}" class="text-center text-light font-weight-bold">Ajustari specifice proprietatii</td>
                                </tr>
                                <tr>
                                    <td>Localizare</td>
                                    <td>
                                        <input type="text" class="form-control" name="sub_location" id="id_sub_location" value="{{valuation.address}}"/>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" class="form-control" name="lc[]" value="{{n.lc}}"/>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" class="form-control" name="lc[]" value="{{n.lc}}"/>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="text" class="form-control" name="lc[]"/>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="text" class="form-control" name="lc[]"/>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="lc_percent[]" class="form-control" step="0.01" id="lc_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="lc_percent[]" class="form-control" step="0.01" id="lc_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="lc_percent[]" class="form-control" step="0.01" id="lc_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="lc_percent[]" class="form-control" step="0.01" id="lc_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="lc_euro[]" class="form-control" step="0.01" id="lc_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="lc_euro[]" class="form-control" step="0.01" id="lc_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="lc_euro[]" class="form-control" step="0.01" id="lc_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="lc_euro[]" class="form-control" step="0.01" id="lc_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="lc_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>
                                
                                <tr>
                                    <td>Compartimentare</td>
                                    <td>
                                        <select id="id_sub_cp" class="form-control" name="sub_cp">
                                            {% for c in comp_type %}
                                            <option value="{{c.type}}">{{c.type}}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_cp" class="form-control" name="cp[]">
                                                    {% for c in comp_type %}
                                                    <option value="{{c.type}}" {% if c.type == n.cp %}selected{% endif %}>{{c.type}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_cp" class="form-control" name="cp[]">
                                                    {% for c in comp_type %}
                                                    <option value="{{c.type}}" {% if c.type == n.cp %}selected{% endif %}>{{c.type}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <select id="id_cp" class="form-control" name="cp[]">
                                                    {% for c in comp_type %}
                                                    <option value="{{c.type}}">{{c.type}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <select id="id_cp" class="form-control" name="cp[]">
                                                {% for c in comp_type %}
                                                <option value="{{c.type}}">{{c.type}}</option>
                                                {% endfor %}
                                            </select>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="cp_percent[]" class="form-control" step="0.01" id="cp_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="cp_percent[]" class="form-control" step="0.01" id="cp_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="cp_percent[]" class="form-control" step="0.01" id="cp_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="cp_percent[]" class="form-control" step="0.01" id="cp_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="cp_euro[]" class="form-control" step="0.01" id="cp_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="cp_euro[]" class="form-control" step="0.01" id="cp_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="cp_euro[]" class="form-control" step="0.01" id="cp_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="cp_euro[]" class="form-control" step="0.01" id="cp_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="cp_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>
                                
                                <tr>
                                    <td>AN PIF</td>
                                    <td>
                                        <input type="text" class="form-control" name="sub_cy" id="id_cy" value="{{const.build_in}}"/>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" class="form-control" name="cy[]" value="{{n.year_build}}"/>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" class="form-control" name="cy[]" value="{{n.year_build}}"/>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="text" class="form-control" name="cy[]"/>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="text" class="form-control" name="cy[]"/>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="cy_percent[]" class="form-control" step="0.01" id="cy_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="cy_percent[]" class="form-control" step="0.01" id="cy_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="cy_percent[]" class="form-control" step="0.01" id="cy_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="cy_percent[]" class="form-control" step="0.01" id="cy_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="cy_euro[]" class="form-control" step="0.01" id="cy_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="cy_euro[]" class="form-control" step="0.01" id="cy_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="cy_euro[]" class="form-control" step="0.01" id="cy_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="cy_euro[]" class="form-control" step="0.01" id="cy_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="cy_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>
                                
                                <tr>
                                    <td>Suprafata utila (mp)</td>
                                    <td>
                                        <input type="number" class="form-control" name="sub_area" id="id_sub_area" step="0.01" value="{{s_area}}"/>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" class="form-control" name="area[]" id="id_area{{forloop.counter}}" value="{{n.area}}" step="0.01"/>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" class="form-control" name="area[]" id="id_area{{forloop.counter}}" value="{{n.area}}" step="0.01"/>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="number" class="form-control" name="area[]" id="id_area{{forloop.counter}}" step="0.01"/>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="number" class="form-control" name="area[]" id="id_area{{forloop.counter}}" step="0.01"/>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Diferenta de suprafata (mp)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="su_diff[]" class="form-control" step="0.01" id="su_diff{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" name="su_diff[]" class="form-control" step="0.01" id="su_diff{{forloop.counter}}">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="su_diff[]" class="form-control" step="0.01" id="su_diff{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="su_diff[]" class="form-control" step="0.01" id="su_diff{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="su_percent[]" class="form-control" step="0.01" id="su_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="su_percent[]" class="form-control" step="0.01" id="su_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="su_percent[]" class="form-control" step="0.01" id="su_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="su_percent[]" class="form-control" step="0.01" id="su_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="su_euro[]" class="form-control" step="0.01" id="su_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="su_euro[]" class="form-control" step="0.01" id="su_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="su_euro[]" class="form-control" step="0.01" id="su_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="su_euro[]" class="form-control" step="0.01" id="su_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="su_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>
                                
                                <tr>
                                    <td>Finisaje</td>
                                    <td>
                                        <select id="id_sub_finish" class="form-control" name="sub_finish">
                                            {% for f in finish_type %}
                                            <option value="{{f.type}}" {% if f.id == const.finish_id %}selected{% endif %}>{{f.type}}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_finish" class="form-control" name="finish[]">
                                                    {% for f in finish_type %}
                                                    <option value="{{f.type}}" {% if f.type == n.finish %}selected{% endif %}>{{f.type}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <select id="id_finish" class="form-control" name="finish[]">
                                                    {% for f in finish_type %}
                                                    <option value="{{f.type}}" {% if f.type == n.finish %}selected{% endif %}>{{f.type}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <select id="id_finish" class="form-control" name="finish[]">
                                                    {% for f in finish_type %}
                                                    <option value="{{f.type}}">{{f.type}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <select id="id_finish" class="form-control" name="finish[]">
                                                {% for f in finish_type %}
                                                <option value="{{f.type}}">{{f.type}}</option>
                                                {% endfor %}
                                            </select>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="finish_percent[]" class="form-control" step="0.01" id="finish_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="finish_percent[]" class="form-control" step="0.01" id="finish_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="finish_percent[]" class="form-control" step="0.01" id="finish_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="finish_percent[]" class="form-control" step="0.01" id="finish_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="finish_euro[]" class="form-control" step="0.01" id="finish_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="finish_euro[]" class="form-control" step="0.01" id="finish_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="finish_euro[]" class="form-control" step="0.01" id="finish_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="finish_euro[]" class="form-control" step="0.01" id="finish_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="finish_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>
                                
                                <tr>
                                    <td>Regim de inaltime</td>
                                    <td>
                                        <input type="text" name="sub_etaj" class="form-control" value="{{const.etaj}}">
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" name="etaj[]" class="form-control" value="{{n.etaj}}">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" name="etaj[]" class="form-control" value="{{n.etaj}}">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="text" name="etaj[]" class="form-control">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="text" name="etaj[]" class="form-control">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="etaj_percent[]" class="form-control" step="0.01" id="etaj_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="etaj_percent[]" class="form-control" step="0.01" id="etaj_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="etaj_percent[]" class="form-control" step="0.01" id="etaj_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="etaj_percent[]" class="form-control" step="0.01" id="etaj_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="etaj_euro[]" class="form-control" step="0.01" id="etaj_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="etaj_euro[]" class="form-control" step="0.01" id="etaj_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="etaj_euro[]" class="form-control" step="0.01" id="etaj_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="etaj_euro[]" class="form-control" step="0.01" id="etaj_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="etaj_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>
                                
                                <tr>
                                    <td>Balcon (mp)</td>
                                    <td>
                                        <input type="number" class="form-control" name="sub_balcon" step="0.01" id="sub_balcon" value="{{s_balcon}}"/>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" class="form-control" name="balcon[]" value="{{n.balcon}}" step="0.01" id="balcon_{{forloop.counter}}"/>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="number" class="form-control" name="balcon[]" value="{{n.balcon}}" step="0.01" id="balcon_{{forloop.counter}}"/>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="number" class="form-control" name="balcon[]" step="0.01" id="balcon_{{forloop.counter}}"/>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="number" class="form-control" name="balcon[]" step="0.01" id="balcon_{{forloop.counter}}"/>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Pret pe mp</td>
                                    <td>
                                        <input type="number" name="price_persqm" id="price_persqm" step="0.01" class="form-control">
                                    </td>
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="balcon_percent[]" class="form-control" step="0.01" id="balcon_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="balcon_percent[]" class="form-control" step="0.01" id="balcon_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="balcon_percent[]" class="form-control" step="0.01" id="balcon_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="balcon_percent[]" class="form-control" step="0.01" id="balcon_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="balcon_euro[]" class="form-control" step="0.01" id="balcon_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="balcon_euro[]" class="form-control" step="0.01" id="balcon_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="balcon_euro[]" class="form-control" step="0.01" id="balcon_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="balcon_euro[]" class="form-control" step="0.01" id="balcon_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="balcon_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>
                                
                                <tr>
                                    <td>Sistem de incalzire</td>
                                    <td>
                                        <select class="form-control" name="sub_hs">
                                            {% for h in heating %}
                                            <option value="{{h.name}}" {% if h.id == const.heating_id %}selected{% endif %}>{{h.name}}</option>
                                            {% endfor %}
                                        </select>
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <select class="form-control" name="hs[]">
                                                    {% for h in heating %}
                                                    <option value="{{h.name}}" {% if h.name == n.hs %}selected{% endif %}>{{h.name}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <select class="form-control" name="hs[]">
                                                    {% for h in heating %}
                                                    <option value="{{h.name}}" {% if h.name == n.hs %}selected{% endif %}>{{h.name}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <select class="form-control" name="hs[]">
                                                    {% for h in heating %}
                                                    <option value="{{h.name}}">{{h.name}}</option>
                                                    {% endfor %}
                                                </select>
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <select class="form-control" name="hs[]">
                                                {% for h in heating %}
                                                <option value="{{h.name}}">{{h.name}}</option>
                                                {% endfor %}
                                            </select>
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="hs_percent[]" class="form-control" step="0.01" id="hs_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="hs_percent[]" class="form-control" step="0.01" id="hs_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="hs_percent[]" class="form-control" step="0.01" id="hs_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="hs_percent[]" class="form-control" step="0.01" id="hs_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="hs_euro[]" class="form-control" step="0.01" id="hs_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="hs_euro[]" class="form-control" step="0.01" id="hs_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="hs_euro[]" class="form-control" step="0.01"  id="hs_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="hs_euro[]" class="form-control" step="0.01"
                                                id="hs_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="hs_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        <input type="text" class="form-control" name="opt1_name">
                                    </td>
                                    <td>
                                        <input type="text" class="form-control" name="sub_opt1_val">
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" class="form-control" name="opt1_val[]">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" class="form-control" name="opt1_val[]">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="text" class="form-control" name="opt1_val[]">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="text" class="form-control" name="opt1_val[]">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="opt1_percent[]" class="form-control" step="0.01" id="opt1_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="opt1_percent[]" class="form-control" step="0.01" id="opt1_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="opt1_percent[]" class="form-control" step="0.01" id="opt1_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="opt1_percent[]" class="form-control" step="0.01" id="opt1_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="opt1_euro[]" class="form-control" step="0.01" id="opt1_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="opt1_euro[]" class="form-control" step="0.01" id="opt1_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="opt1_euro[]" class="form-control" step="0.01" id="opt1_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="opt1_euro[]" class="form-control" step="0.01" id="opt1_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="opt1_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        <input type="text" class="form-control" name="opt2_name">
                                    </td>
                                    <td>
                                        <input type="text" class="form-control" name="sub_opt2_val">
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" class="form-control" name="opt2_val[]">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" class="form-control" name="opt2_val[]">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="text" class="form-control" name="opt2_val[]">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="text" class="form-control" name="opt2_val[]">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="opt2_percent[]" class="form-control" step="0.01" id="opt2_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="opt2_percent[]" class="form-control" step="0.01" id="opt2_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="opt2_percent[]" class="form-control" step="0.01" id="opt2_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="opt2_percent[]" class="form-control" step="0.01" id="opt2_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="opt2_euro[]" class="form-control" step="0.01" id="opt2_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="opt2_euro[]" class="form-control" step="0.01" id="opt2_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="opt2_euro[]" class="form-control" step="0.01" id="opt2_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="opt2_euro[]" class="form-control" step="0.01" id="opt2_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="opt2_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>
                                
                                <tr>
                                    <td>
                                        <input type="text" class="form-control" name="opt3_name">
                                    </td>
                                    <td>
                                        <input type="text" class="form-control" name="sub_opt3_val">
                                    </td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" class="form-control" name="opt3_val[]">
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <input type="text" class="form-control" name="opt3_val[]">
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                            <td>
                                                <input type="text" class="form-control" name="opt3_val[]">
                                            </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                        <td>
                                            <input type="text" class="form-control" name="opt3_val[]">
                                        </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (%)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="opt3_percent[]" class="form-control" step="0.01" id="opt3_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="opt3_percent[]" class="form-control" step="0.01" id="opt3_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <div class="input-group">
                                                        <input type="number" name="opt3_percent[]" class="form-control" step="0.01" id="opt3_percent{{forloop.counter}}">
                                                        <div class="input-group-append">
                                                            <span class="input-group-text">%</span>
                                                        </div>
                                                    </div>
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <div class="input-group">
                                                    <input type="number" name="opt3_percent[]" class="form-control" step="0.01" id="opt3_percent{{forloop.counter}}">
                                                    <div class="input-group-append">
                                                        <span class="input-group-text">%</span>
                                                    </div>
                                                </div>
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Ajustare (EURO)</td>
                                    <td></td>
                                    {% if comparable %}
                                        {% if comparable|length == nr_comp %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="opt3_euro[]" class="form-control" step="0.01" id="opt3_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% else %}
                                            {% for n in comparable %}
                                                <td>
                                                    <input type="number" name="opt3_euro[]" class="form-control" step="0.01" id="opt3_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                            {% for n in comparable|get_extra_length:nr_comp %}
                                                <td>
                                                    <input type="number" name="opt3_euro[]" class="form-control" step="0.01" id="opt3_euro{{forloop.counter}}">
                                                </td>
                                            {% endfor %}
                                        {% endif %}
                                    {% else %}
                                        {% for n in nr_comp|list_range %}
                                            <td>
                                                <input type="number" name="opt3_euro[]" class="form-control" step="0.01" id="opt3_euro{{forloop.counter}}">
                                            </td>
                                        {% endfor %}
                                    {% endif %}
                                </tr>
                                <tr>
                                    <td>Motivare corectie</td>
                                    <td colspan="{{nr_comp|add:'1'}}" style="height: 60px!important;"><textarea name="opt3_motivation" rows="5" class="form-control"></textarea></td>
                                </tr>

                                <tr>
                                    <td>Ajustare neta pentru caracteristici specifice proprietatii</td>
                                    <td></td>
                                    {% for n in nr_comp|list_range %}
                                    <td><input type="number" class="form-control" name="net_adjustment[]" id="net_adjustment{{forloop.counter}}" step="0.01" readonly></td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>Pret ajustat (EURO)</td>
                                    <td></td>
                                    {% for n in nr_comp|list_range %}
                                    <td><input type="number" class="form-control" name="adjustment_price[]"  id="adjustment_price{{forloop.counter}}" step="0.01" readonly></td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>Numar de ajustări</td>
                                    <td></td>
                                    {% for n in nr_comp|list_range %}
                                    <td><input type="number" class="form-control" name="adjustment_no[]" id="adjustment_no{{forloop.counter}}" readonly></td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>Ajustare totală netă (%)</td>
                                    <td></td>
                                    {% for n in nr_comp|list_range %}
                                    <td>
                                        <div class="input-group">
                                            <input type="number" class="form-control" name="total_percent[]" id="total_percent{{forloop.counter}}" step="0.01" readonly>
                                            <div class="input-group-append">
                                                <span class="input-group-text">%</span>
                                            </div>
                                        </div>
                                    </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>Ajustare totală netă (EURO)</td>
                                    <td></td>
                                    {% for n in nr_comp|list_range %}
                                    <td><input type="number" class="form-control" name="total_euro[]" id="total_euro{{forloop.counter}}" step="0.01" readonly></td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>Ajustare totală brută (%)</td>
                                    <td></td>
                                    {% for n in nr_comp|list_range %}
                                    <td>
                                        <div class="input-group">
                                            <input type="number" class="form-control" name="gross_percent[]" id="gross_percent{{forloop.counter}}" step="0.01" readonly>
                                            <div class="input-group-append">
                                                <span class="input-group-text">%</span>
                                            </div>
                                        </div>
                                    </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>Ajustare totală brută (EURO)</td>
                                    <td></td>
                                    {% for n in nr_comp|list_range %}
                                    <td><input type="number" class="form-control" name="gross_euro[]" id="gross_euro{{forloop.counter}}" step="0.01" readonly></td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>VALOARE ESTIMATA (EURO)</td>
                                    <td>
                                        <div class="input-group">
                                            <input type="number" class="form-control" name="estimated_value" id="estimated_value" step="0.01" readonly>
                                            <div class="input-group-append">
                                                <span class="input-group-text">&euro;</span>
                                            </div>
                                        </div>
                                    </td>
                                    <td colspan="{{nr_comp}}"><i class="fas fa-redo text-white" id="refresh"></i></td>
                                </tr>
                                <tr>
                                    <td colspan="{{nr_comp|add:'1'}}">* cea mai mica corectie totala bruta s-a a efectuat pentru comparabila:</td>
                                    <td><input type="text" class="form-control" name="smallest_gross" id="smallest_gross" readonly></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="card-action">
                        <button class="btn btn-success" type="submit">{% if instance %}Update{% else %}Save{% endif %}</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
    <!-- bootstrap datepicker  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/js/bootstrap-datepicker.min.js"></script>
    <script type="text/javascript">
        $("#id_sub_me").datepicker( {
            format: "MM yyyy",
            startView: "months", 
            minViewMode: "months"
        });
        $(".market_env").datepicker( {
            format: "MM yyyy",
            startView: "months", 
            minViewMode: "months"
        });

        var nr = "{{nr_comp}}";
        for(let i=1; i<=nr; i++) {
            let sp = ($('#sp_'+i+'').val() != '') ? Number($('#sp_'+i+'').val()) : 0.00;
            let ma = ($('#ma_'+i+'').val() != '') ? Number($('#ma_'+i+'').val()) : 0.00;
            let pba = ($('#pba_'+i+'').val() != '') ? Number($('#pba_'+i+'').val()) : 0.00;
            let offer_price = 0.00;
            $('#sp_'+i+'').keyup(function() {
                sp = Number(this.value);
                offer_price = sp + ma + pba;
                $("#op_"+i+"").val(offer_price);
            });
            $('#ma_'+i+'').keyup(function() {
                ma = Number(this.value);
                offer_price = sp + ma + pba;
                $("#op_"+i+"").val(offer_price);
            })
            $('#pba_'+i+'').keyup(function() {
                pba = Number(this.value);
                offer_price = sp + ma + pba;
                $("#op_"+i+"").val(offer_price);
            })

            // margin euro and percent 
            let margin = 0.00;
            let cv = 0.00;
            let mp = 0.00;
            $('#margin_'+i+'').keyup(function() {
                margin = Number(this.value);
                cv = (sp*margin)/100;
                $('#cv_'+i+'').val(cv);
                mp = sp + cv;
                $('#mp_'+i+'').val(mp);
            })

            // property rights 
            let pr_percent = 0.00;
            let pr_euro = 0.00;
            let pr_price = 0.00;
            $('#pr_percent'+i+'').keyup(function() {
                pr_percent = Number(this.value);
                pr_euro = (mp*pr_percent)/100;
                $('#pr_euro'+i+'').val(pr_euro.toFixed(0));
                pr_price = mp + pr_euro;
                $('#pr_price'+i+'').val(pr_price.toFixed(0));
            })
            $('#pr_euro'+i+'').keyup(function() {
                pr_euro = Number(this.value);
                pr_percent = (pr_euro/mp)*100;
                $('#pr_percent'+i+'').val(pr_percent.toFixed(0));
                pr_price = mp + pr_euro;
                $('#pr_price'+i+'').val(pr_price.toFixed(0));
            })

            // financial condition
            let fc_percent = 0.00;
            let fc_euro = 0.00;
            let fc_price = 0.00;
            $('#fc_percent'+i+'').keyup(function() {
                fc_percent = Number(this.value);
                fc_euro = (pr_price*fc_percent)/100;
                $('#fc_euro'+i+'').val(fc_euro.toFixed(0));
                fc_price = pr_price + fc_euro;
                $('#fc_price'+i+'').val(fc_price.toFixed(0));
            })
            $('#fc_euro'+i+'').keyup(function() {
                fc_euro = Number(this.value);
                fc_percent = (fc_euro/pr_price)*100;
                $('#fc_percent'+i+'').val(fc_percent.toFixed(0));
                fc_price = pr_price + fc_euro;
                $('#fc_price'+i+'').val(fc_price.toFixed(0));
            })

            // sale condition 
            let sc_percent = 0.00;
            let sc_euro = 0.00;
            let sc_price = 0.00;
            $('#sc_percent'+i+'').keyup(function() {
                sc_percent = Number(this.value);
                sc_euro = (fc_price*sc_percent)/100;
                $('#sc_euro'+i+'').val(sc_euro.toFixed(0));
                sc_price = fc_price + sc_euro;
                $('#sc_price'+i+'').val(sc_price.toFixed(0));
            })
            $('#sc_euro'+i+'').keyup(function() {
                sc_euro = Number(this.value);
                sc_percent = (sc_euro/fc_price)*100;
                $('#sc_percent'+i+'').val(sc_percent.toFixed(0));
                sc_price = fc_price + sc_euro;
                $('#sc_price'+i+'').val(sc_price.toFixed(0));
            })

            // after purchase 
            let ape_percent = 0.00;
            let ape_euro = 0.00;
            let ape_price = 0.00;
            $('#ape_euro'+i+'').keyup(function() {
                ape_euro = Number(this.value);
                ape_percent = (ape_euro/sc_price)*100;
                $('#ape_percent'+i+'').val(ape_percent.toFixed(0));
                ape_price = sc_price + ape_euro;
                $('#ape_price'+i+'').val(ape_price.toFixed(0));
            })
            $('#ape_percent'+i+'').keyup(function() {
                ape_percent = Number(this.value);
                ape_euro = (sc_price*ape_percent)/100;
                $('#ape_euro'+i+'').val(ape_euro.toFixed(0));
                ape_price = sc_price + ape_euro;
                $('#ape_price'+i+'').val(ape_price.toFixed(0));
            })

            // market environment
            let me_percent = 0.00;
            let me_euro = 0.00;
            let me_price = 0.00;
            $('#me_percent'+i+'').keyup(function() {
                me_percent = Number(this.value);
                me_euro = (ape_price*me_percent)/100;
                $('#me_euro'+i+'').val(me_euro.toFixed(0));
                me_price = ape_price + me_euro;
                $('#me_price'+i+'').val(me_price.toFixed(0));
            })
            $('#me_euro'+i+'').keyup(function() {
                me_euro = Number(this.value);
                me_percent = (me_euro/ape_price)*100;
                $('#me_percent'+i+'').val(me_percent.toFixed(0));
                me_price = ape_price + me_euro;
                $('#me_price'+i+'').val(me_price.toFixed(0));
            })

            // location
            let lc_percent = 0.00;
            let lc_euro = 0.00;
            $('#lc_percent'+i+'').keyup(function() {
                lc_percent = Number(this.value);
                lc_euro = (me_price*lc_percent)/100;
                $('#lc_euro'+i+'').val(lc_euro.toFixed(0));
            })
            $('#lc_euro'+i+'').keyup(function() {
                lc_euro = Number(this.value);
                lc_percent = (lc_euro/me_price)*100;
                $('#lc_percent'+i+'').val(lc_percent.toFixed(0));
            })

            // compartment
            let cp_percent = 0.00;
            let cp_euro = 0.00;
            $('#cp_percent'+i+'').keyup(function() {
                cp_percent = Number(this.value);
                cp_euro = (me_price*cp_percent)/100;
                $('#cp_euro'+i+'').val(cp_euro.toFixed(0));
            })
            $('#cp_euro'+i+'').keyup(function() {
                cp_euro = Number(this.value);
                cp_percent = (cp_euro/me_price)*100;
                $('#cp_percent'+i+'').val(cp_percent.toFixed(0));
            })

            // construction year
            let cy_percent = 0.00;
            let cy_euro = 0.00;
            $('#cy_percent'+i+'').keyup(function() {
                cy_percent = Number(this.value);
                cy_euro = (me_price*cy_percent)/100;
                $('#cy_euro'+i+'').val(cy_euro.toFixed(0));
            })
            $('#cy_euro'+i+'').keyup(function() {
                cy_euro = Number(this.value);
                cy_percent = (cy_euro/me_price)*100;
                $('#cy_percent'+i+'').val(cy_percent.toFixed(0));
            })

            let area = 0.00;
            let su_diff = 0.00;
            let su_percent = 0.00;
            let su_euro = 0.00;
            $('#id_area'+i+'').keyup(function() {
                area = Number(this.value);
                su_diff = Number($('#id_sub_area').val()) - area;
                $('#su_diff'+i+'').val(su_diff.toFixed(2));
                su_euro = (su_diff/area) * me_price;
                $('#su_euro'+i+'').val(su_euro.toFixed(0));
                su_percent = (su_euro/me_price)*100;
                $('#su_percent'+i+'').val(su_percent.toFixed(0));
            })

            // finish
            let finish_percent = 0.00;
            let finish_euro = 0.00;
            $('#finish_euro'+i+'').keyup(function() {
                finish_euro = Number(this.value);
                finish_percent = (finish_euro/me_price)*100;
                $('#finish_percent'+i+'').val(finish_percent.toFixed(0));
            })
            $('#finish_percent'+i+'').keyup(function() {
                finish_percent = Number(this.value);
                finish_euro = (me_price*finish_percent)/100;
                $('#finish_euro'+i+'').val(finish_euro.toFixed(0));
            })
            
            // etaj 
            let etaj_percent = 0.00;
            let etaj_euro = 0.00;
            $('#etaj_percent'+i+'').keyup(function() {
                etaj_percent = Number(this.value);
                etaj_euro = (me_price*etaj_percent)/100;
                $('#etaj_euro'+i+'').val(etaj_euro.toFixed(0));
            })
            $('#etaj_euro'+i+'').keyup(function() {
                etaj_euro = Number(this.value);
                etaj_percent = (etaj_euro/me_price)*100;
                $('#etaj_percent'+i+'').val(etaj_percent.toFixed(0));
            })

            let balcon = 0.00;
            let balcon_diff = 0.00;
            let balcon_percent = 0.00;
            let balcon_euro = 0.00;
            $('#balcon_'+i+'').keyup(function() {
                balcon = Number(this.value);
                balcon_diff = Number($('#sub_balcon').val()) - balcon;
                balcon_euro = balcon_diff*Number($('#price_persqm').val());
                $('#balcon_euro'+i+'').val(balcon_euro.toFixed(0));
                balcon_percent = (balcon_euro/me_price)*100;
                $('#balcon_percent'+i+'').val(balcon_percent.toFixed(0));
            })
            $('#price_persqm').keyup(function() {
                price = Number(this.value);
                balcon_diff = Number($('#sub_balcon').val()) - Number($('#balcon_'+i+'').val());
                balcon_euro = balcon_diff*price;
                $('#balcon_euro'+i+'').val(balcon_euro.toFixed(0));
                balcon_percent = (balcon_euro/me_price)*100;
                $('#balcon_percent'+i+'').val(balcon_percent.toFixed(0));
            })


            // heating system
            let hs_percent = 0.00;
            let hs_euro = 0.00;
            let net_adjustment = 0.00;
            let adjustment_price = 0.00;
            let adjustment_no = 0;
            let total_percent = 0.00;
            let total_euro = 0.00;
            let gross_percent = 0.00;
            let gross_euro = 0.00;
            $('#hs_euro'+i+'').keyup(function() {
                let count = 0;
                hs_euro = Number(this.value);
                hs_percent = (hs_euro/me_price)*100;
                $('#hs_percent'+i+'').val(hs_percent.toFixed(0));
                net_adjustment = lc_euro+cp_euro+cy_euro+su_euro+finish_euro+etaj_euro+balcon_euro+hs_euro; 
                $('#net_adjustment'+i+'').val(net_adjustment.toFixed(0));
                adjustment_price = net_adjustment + me_price;
                $('#adjustment_price'+i+'').val(adjustment_price.toFixed(0));
                (pr_euro != 0) ? count += 1 : count += 0;
                (fc_euro != 0) ? count += 1 : count += 0;
                (sc_euro != 0) ? count += 1 : count += 0;
                (ape_euro != 0) ? count += 1 : count += 0;
                (me_euro != 0) ? count += 1 : count += 0;
                (lc_euro != 0) ? count += 1 : count += 0;
                (cp_euro != 0) ? count += 1 : count += 0;
                (cy_euro != 0) ? count += 1 : count += 0;
                (su_euro != 0) ? count += 1 : count += 0;
                (finish_euro != 0) ? count += 1 : count += 0;
                (etaj_euro != 0) ? count += 1 : count += 0;
                (balcon_euro != 0) ? count += 1 : count += 0;
                (hs_euro != 0) ? count += 1 : count += 0;
                adjustment_no = count;
                $('#adjustment_no'+i+'').val(adjustment_no);
                total_euro = pr_euro+fc_euro+sc_euro+ape_euro+me_euro+net_adjustment;
                $('#total_euro'+i+'').val(total_euro.toFixed(0));
                total_percent = (total_euro/mp)*100;
                $('#total_percent'+i+'').val(total_percent.toFixed(0));
                gross_euro = Math.abs(pr_euro) + Math.abs(fc_euro) + Math.abs(sc_euro) + Math.abs(ape_euro) + (me_euro) + Math.abs(lc_euro) + Math.abs(cp_euro) + Math.abs(cy_euro) + Math.abs(su_euro) + Math.abs(finish_euro) + Math.abs(etaj_euro) + Math.abs(balcon_euro) + Math.abs(hs_euro);
                $('#gross_euro'+i+'').val(gross_euro.toFixed(0));
                gross_percent = (gross_euro/mp)*100;
                $('#gross_percent'+i+'').val(gross_percent.toFixed(1));
            })
            $('#hs_percent'+i+'').keyup(function() {
                let count = 0;
                hs_percent = Number(this.value);
                hs_euro = (me_price*hs_percent)/100;
                $('#hs_euro'+i+'').val(hs_euro.toFixed(0));
                net_adjustment = lc_euro+cp_euro+cy_euro+su_euro+finish_euro+etaj_euro+balcon_euro+hs_euro; 
                $('#net_adjustment'+i+'').val(net_adjustment.toFixed(0));
                adjustment_price = net_adjustment + me_price;
                $('#adjustment_price'+i+'').val(adjustment_price.toFixed(0));
                (pr_euro != 0) ? count += 1 : count += 0;
                (fc_euro != 0) ? count += 1 : count += 0;
                (sc_euro != 0) ? count += 1 : count += 0;
                (ape_euro != 0) ? count += 1 : count += 0;
                (me_euro != 0) ? count += 1 : count += 0;
                (lc_euro != 0) ? count += 1 : count += 0;
                (cp_euro != 0) ? count += 1 : count += 0;
                (cy_euro != 0) ? count += 1 : count += 0;
                (su_euro != 0) ? count += 1 : count += 0;
                (finish_euro != 0) ? count += 1 : count += 0;
                (etaj_euro != 0) ? count += 1 : count += 0;
                (balcon_euro != 0) ? count += 1 : count += 0;
                (hs_euro != 0) ? count += 1 : count += 0;
                adjustment_no = count;
                $('#adjustment_no'+i+'').val(adjustment_no);
                total_euro = pr_euro+fc_euro+sc_euro+ape_euro+me_euro+net_adjustment;
                $('#total_euro'+i+'').val(total_euro.toFixed(0));
                total_percent = (total_euro/mp)*100;
                $('#total_percent'+i+'').val(total_percent.toFixed(0));
                gross_euro = Math.abs(pr_euro) + Math.abs(fc_euro) + Math.abs(sc_euro) + Math.abs(ape_euro) + (me_euro) + Math.abs(lc_euro) + Math.abs(cp_euro) + Math.abs(cy_euro) + Math.abs(su_euro) + Math.abs(finish_euro) + Math.abs(etaj_euro) + Math.abs(balcon_euro) + Math.abs(hs_euro);
                $('#gross_euro'+i+'').val(gross_euro.toFixed(0));
                gross_percent = (gross_euro/mp)*100;
                $('#gross_percent'+i+'').val(gross_percent.toFixed(1));
            })

            // optional element one
            let opt1_percent = 0.00;
            let opt1_euro = 0.00;
            $('#opt1_euro'+i+'').keyup(function() {
                let count = 0;
                opt1_euro = Number(this.value);
                opt1_percent = (opt1_euro/me_price)*100;
                $('#opt1_percent'+i+'').val(opt1_percent.toFixed(0));
                net_adjustment = lc_euro+cp_euro+cy_euro+su_euro+finish_euro+etaj_euro+balcon_euro+hs_euro+opt1_euro; 
                $('#net_adjustment'+i+'').val(net_adjustment.toFixed(0));
                adjustment_price = net_adjustment + me_price;
                $('#adjustment_price'+i+'').val(adjustment_price.toFixed(0));
                (pr_euro != 0) ? count += 1 : count += 0;
                (fc_euro != 0) ? count += 1 : count += 0;
                (sc_euro != 0) ? count += 1 : count += 0;
                (ape_euro != 0) ? count += 1 : count += 0;
                (me_euro != 0) ? count += 1 : count += 0;
                (lc_euro != 0) ? count += 1 : count += 0;
                (cp_euro != 0) ? count += 1 : count += 0;
                (cy_euro != 0) ? count += 1 : count += 0;
                (su_euro != 0) ? count += 1 : count += 0;
                (finish_euro != 0) ? count += 1 : count += 0;
                (etaj_euro != 0) ? count += 1 : count += 0;
                (balcon_euro != 0) ? count += 1 : count += 0;
                (hs_euro != 0) ? count += 1 : count += 0;
                (opt1_euro != 0) ? count += 1 : count += 0;
                adjustment_no = count;
                $('#adjustment_no'+i+'').val(adjustment_no);
                total_euro = pr_euro+fc_euro+sc_euro+ape_euro+me_euro+net_adjustment;
                $('#total_euro'+i+'').val(total_euro.toFixed(0));
                total_percent = (total_euro/mp)*100;
                $('#total_percent'+i+'').val(total_percent.toFixed(0));
                gross_euro = Math.abs(pr_euro) + Math.abs(fc_euro) + Math.abs(sc_euro) + Math.abs(ape_euro) + (me_euro) + Math.abs(lc_euro) + Math.abs(cp_euro) + Math.abs(cy_euro) + Math.abs(su_euro) + Math.abs(finish_euro) + Math.abs(etaj_euro) + Math.abs(balcon_euro) + Math.abs(hs_euro) + Math.abs(opt1_euro);
                $('#gross_euro'+i+'').val(gross_euro.toFixed(0));
                gross_percent = (gross_euro/mp)*100;
                $('#gross_percent'+i+'').val(gross_percent.toFixed(1));
            })
            $('#opt1_percent'+i+'').keyup(function() {
                let count = 0;
                opt1_percent = Number(this.value);
                opt1_euro = (me_price*opt1_percent)/100;
                $('#opt1_euro'+i+'').val(opt1_euro.toFixed(0));
                net_adjustment = lc_euro+cp_euro+cy_euro+su_euro+finish_euro+etaj_euro+balcon_euro+hs_euro+opt1_euro; 
                $('#net_adjustment'+i+'').val(net_adjustment.toFixed(0));
                adjustment_price = net_adjustment + me_price;
                $('#adjustment_price'+i+'').val(adjustment_price.toFixed(0));
                (pr_euro != 0) ? count += 1 : count += 0;
                (fc_euro != 0) ? count += 1 : count += 0;
                (sc_euro != 0) ? count += 1 : count += 0;
                (ape_euro != 0) ? count += 1 : count += 0;
                (me_euro != 0) ? count += 1 : count += 0;
                (lc_euro != 0) ? count += 1 : count += 0;
                (cp_euro != 0) ? count += 1 : count += 0;
                (cy_euro != 0) ? count += 1 : count += 0;
                (su_euro != 0) ? count += 1 : count += 0;
                (finish_euro != 0) ? count += 1 : count += 0;
                (etaj_euro != 0) ? count += 1 : count += 0;
                (balcon_euro != 0) ? count += 1 : count += 0;
                (hs_euro != 0) ? count += 1 : count += 0;
                (opt1_euro != 0) ? count += 1 : count += 0;
                adjustment_no = count;
                $('#adjustment_no'+i+'').val(adjustment_no);
                total_euro = pr_euro+fc_euro+sc_euro+ape_euro+me_euro+net_adjustment;
                $('#total_euro'+i+'').val(total_euro.toFixed(0));
                total_percent = (total_euro/mp)*100;
                $('#total_percent'+i+'').val(total_percent.toFixed(0));
                gross_euro = Math.abs(pr_euro) + Math.abs(fc_euro) + Math.abs(sc_euro) + Math.abs(ape_euro) + (me_euro) + Math.abs(lc_euro) + Math.abs(cp_euro) + Math.abs(cy_euro) + Math.abs(su_euro) + Math.abs(finish_euro) + Math.abs(etaj_euro) + Math.abs(balcon_euro) + Math.abs(hs_euro) + Math.abs(opt1_euro);
                $('#gross_euro'+i+'').val(gross_euro.toFixed(0));
                gross_percent = (gross_euro/mp)*100;
                $('#gross_percent'+i+'').val(gross_percent.toFixed(1));
            })

            // optional element two
            let opt2_percent = 0.00;
            let opt2_euro = 0.00;
            $('#opt2_euro'+i+'').keyup(function() {
                let count = 0;
                opt2_euro = Number(this.value);
                opt2_percent = (opt2_euro/me_price)*100;
                $('#opt2_percent'+i+'').val(opt2_percent.toFixed(0));
                net_adjustment = lc_euro+cp_euro+cy_euro+su_euro+finish_euro+etaj_euro+balcon_euro+hs_euro+opt1_euro+opt2_euro; 
                $('#net_adjustment'+i+'').val(net_adjustment.toFixed(0));
                adjustment_price = net_adjustment + me_price;
                $('#adjustment_price'+i+'').val(adjustment_price.toFixed(0));
                (pr_euro != 0) ? count += 1 : count += 0;
                (fc_euro != 0) ? count += 1 : count += 0;
                (sc_euro != 0) ? count += 1 : count += 0;
                (ape_euro != 0) ? count += 1 : count += 0;
                (me_euro != 0) ? count += 1 : count += 0;
                (lc_euro != 0) ? count += 1 : count += 0;
                (cp_euro != 0) ? count += 1 : count += 0;
                (cy_euro != 0) ? count += 1 : count += 0;
                (su_euro != 0) ? count += 1 : count += 0;
                (finish_euro != 0) ? count += 1 : count += 0;
                (etaj_euro != 0) ? count += 1 : count += 0;
                (balcon_euro != 0) ? count += 1 : count += 0;
                (hs_euro != 0) ? count += 1 : count += 0;
                (opt1_euro != 0) ? count += 1 : count += 0;
                (opt2_euro != 0) ? count += 1 : count += 0;
                adjustment_no = count;
                $('#adjustment_no'+i+'').val(adjustment_no);
                total_euro = pr_euro+fc_euro+sc_euro+ape_euro+me_euro+net_adjustment;
                $('#total_euro'+i+'').val(total_euro.toFixed(0));
                total_percent = (total_euro/mp)*100;
                $('#total_percent'+i+'').val(total_percent.toFixed(0));
                gross_euro = Math.abs(pr_euro) + Math.abs(fc_euro) + Math.abs(sc_euro) + Math.abs(ape_euro) + (me_euro) + Math.abs(lc_euro) + Math.abs(cp_euro) + Math.abs(cy_euro) + Math.abs(su_euro) + Math.abs(finish_euro) + Math.abs(etaj_euro) + Math.abs(balcon_euro) + Math.abs(hs_euro) + Math.abs(opt1_euro) + Math.abs(opt2_euro);
                $('#gross_euro'+i+'').val(gross_euro.toFixed(0));
                gross_percent = (gross_euro/mp)*100;
                $('#gross_percent'+i+'').val(gross_percent.toFixed(1));
            })
            $('#opt2_percent'+i+'').keyup(function() {
                let count = 0;
                opt2_percent = Number(this.value);
                opt2_euro = (me_price*opt2_percent)/100;
                $('#opt2_euro'+i+'').val(opt2_euro.toFixed(0));
                net_adjustment = lc_euro+cp_euro+cy_euro+su_euro+finish_euro+etaj_euro+balcon_euro+hs_euro+opt1_euro+opt2_euro;  
                $('#net_adjustment'+i+'').val(net_adjustment.toFixed(0));
                adjustment_price = net_adjustment + me_price;
                $('#adjustment_price'+i+'').val(adjustment_price.toFixed(0));
                (pr_euro != 0) ? count += 1 : count += 0;
                (fc_euro != 0) ? count += 1 : count += 0;
                (sc_euro != 0) ? count += 1 : count += 0;
                (ape_euro != 0) ? count += 1 : count += 0;
                (me_euro != 0) ? count += 1 : count += 0;
                (lc_euro != 0) ? count += 1 : count += 0;
                (cp_euro != 0) ? count += 1 : count += 0;
                (cy_euro != 0) ? count += 1 : count += 0;
                (su_euro != 0) ? count += 1 : count += 0;
                (finish_euro != 0) ? count += 1 : count += 0;
                (etaj_euro != 0) ? count += 1 : count += 0;
                (balcon_euro != 0) ? count += 1 : count += 0;
                (hs_euro != 0) ? count += 1 : count += 0;
                (opt1_euro != 0) ? count += 1 : count += 0;
                (opt2_euro != 0) ? count += 1 : count += 0;
                adjustment_no = count;
                $('#adjustment_no'+i+'').val(adjustment_no);
                total_euro = pr_euro+fc_euro+sc_euro+ape_euro+me_euro+net_adjustment;
                $('#total_euro'+i+'').val(total_euro.toFixed(0));
                total_percent = (total_euro/mp)*100;
                $('#total_percent'+i+'').val(total_percent.toFixed(0));
                gross_euro = Math.abs(pr_euro) + Math.abs(fc_euro) + Math.abs(sc_euro) + Math.abs(ape_euro) + (me_euro) + Math.abs(lc_euro) + Math.abs(cp_euro) + Math.abs(cy_euro) + Math.abs(su_euro) + Math.abs(finish_euro) + Math.abs(etaj_euro) + Math.abs(balcon_euro) + Math.abs(hs_euro) + Math.abs(opt1_euro) + Math.abs(opt2_euro);
                $('#gross_euro'+i+'').val(gross_euro.toFixed(0));
                gross_percent = (gross_euro/mp)*100;
                $('#gross_percent'+i+'').val(gross_percent.toFixed(1));
            })

            // optional element three
            let opt3_percent = 0.00;
            let opt3_euro = 0.00;
            $('#opt3_euro'+i+'').keyup(function() {
                let count = 0;
                opt3_euro = Number(this.value);
                opt3_percent = (opt3_euro/me_price)*100;
                $('#opt3_percent'+i+'').val(opt3_percent.toFixed(0));
                net_adjustment = lc_euro+cp_euro+cy_euro+su_euro+finish_euro+etaj_euro+balcon_euro+hs_euro+opt1_euro+opt2_euro+opt3_euro; 
                $('#net_adjustment'+i+'').val(net_adjustment.toFixed(0));
                adjustment_price = net_adjustment + me_price;
                $('#adjustment_price'+i+'').val(adjustment_price.toFixed(0));
                (pr_euro != 0) ? count += 1 : count += 0;
                (fc_euro != 0) ? count += 1 : count += 0;
                (sc_euro != 0) ? count += 1 : count += 0;
                (ape_euro != 0) ? count += 1 : count += 0;
                (me_euro != 0) ? count += 1 : count += 0;
                (lc_euro != 0) ? count += 1 : count += 0;
                (cp_euro != 0) ? count += 1 : count += 0;
                (cy_euro != 0) ? count += 1 : count += 0;
                (su_euro != 0) ? count += 1 : count += 0;
                (finish_euro != 0) ? count += 1 : count += 0;
                (etaj_euro != 0) ? count += 1 : count += 0;
                (balcon_euro != 0) ? count += 1 : count += 0;
                (hs_euro != 0) ? count += 1 : count += 0;
                (opt1_euro != 0) ? count += 1 : count += 0;
                (opt2_euro != 0) ? count += 1 : count += 0;
                (opt3_euro != 0) ? count += 1 : count += 0;
                adjustment_no = count;
                $('#adjustment_no'+i+'').val(adjustment_no);
                total_euro = pr_euro+fc_euro+sc_euro+ape_euro+me_euro+net_adjustment;
                $('#total_euro'+i+'').val(total_euro.toFixed(0));
                total_percent = (total_euro/mp)*100;
                $('#total_percent'+i+'').val(total_percent.toFixed(0));
                gross_euro = Math.abs(pr_euro) + Math.abs(fc_euro) + Math.abs(sc_euro) + Math.abs(ape_euro) + (me_euro) + Math.abs(lc_euro) + Math.abs(cp_euro) + Math.abs(cy_euro) + Math.abs(su_euro) + Math.abs(finish_euro) + Math.abs(etaj_euro) + Math.abs(balcon_euro) + Math.abs(hs_euro) + Math.abs(opt1_euro) + Math.abs(opt2_euro) + Math.abs(opt3_euro);
                $('#gross_euro'+i+'').val(gross_euro.toFixed(0));
                gross_percent = (gross_euro/mp)*100;
                $('#gross_percent'+i+'').val(gross_percent.toFixed(1));
            })
            $('#opt3_percent'+i+'').keyup(function() {
                let count = 0;
                opt3_percent = Number(this.value);
                opt3_euro = (me_price*opt3_percent)/100;
                $('#opt3_euro'+i+'').val(opt3_euro.toFixed(0));
                net_adjustment = lc_euro+cp_euro+cy_euro+su_euro+finish_euro+etaj_euro+balcon_euro+hs_euro+opt1_euro+opt2_euro+opt3_euro; 
                $('#net_adjustment'+i+'').val(net_adjustment.toFixed(0));
                adjustment_price = net_adjustment + me_price;
                $('#adjustment_price'+i+'').val(adjustment_price.toFixed(0));
                (pr_euro != 0) ? count += 1 : count += 0;
                (fc_euro != 0) ? count += 1 : count += 0;
                (sc_euro != 0) ? count += 1 : count += 0;
                (ape_euro != 0) ? count += 1 : count += 0;
                (me_euro != 0) ? count += 1 : count += 0;
                (lc_euro != 0) ? count += 1 : count += 0;
                (cp_euro != 0) ? count += 1 : count += 0;
                (cy_euro != 0) ? count += 1 : count += 0;
                (su_euro != 0) ? count += 1 : count += 0;
                (finish_euro != 0) ? count += 1 : count += 0;
                (etaj_euro != 0) ? count += 1 : count += 0;
                (balcon_euro != 0) ? count += 1 : count += 0;
                (hs_euro != 0) ? count += 1 : count += 0;
                (opt1_euro != 0) ? count += 1 : count += 0;
                (opt2_euro != 0) ? count += 1 : count += 0;
                (opt3_euro != 0) ? count += 1 : count += 0;
                adjustment_no = count;
                $('#adjustment_no'+i+'').val(adjustment_no);
                total_euro = pr_euro+fc_euro+sc_euro+ape_euro+me_euro+net_adjustment;
                $('#total_euro'+i+'').val(total_euro.toFixed(0));
                total_percent = (total_euro/mp)*100;
                $('#total_percent'+i+'').val(total_percent.toFixed(0));
                gross_euro = Math.abs(pr_euro) + Math.abs(fc_euro) + Math.abs(sc_euro) + Math.abs(ape_euro) + (me_euro) + Math.abs(lc_euro) + Math.abs(cp_euro) + Math.abs(cy_euro) + Math.abs(su_euro) + Math.abs(finish_euro) + Math.abs(etaj_euro) + Math.abs(balcon_euro) + Math.abs(hs_euro) + Math.abs(opt1_euro) + Math.abs(opt2_euro) + Math.abs(opt3_euro);
                $('#gross_euro'+i+'').val(gross_euro.toFixed(0));
                gross_percent = (gross_euro/mp)*100;
                $('#gross_percent'+i+'').val(gross_percent.toFixed(1));
            })
        }

        $("#refresh").on('click', function () {
            var minprice = Number($('#adjustment_price1').val());
            var pos = 1;
            for(let i=1; i<=nr; i++) {
                let val = Number($('#adjustment_price'+i+'').val());
                if(minprice>val) {
                    minprice = val;
                    pos = i;
                }
            }
            var pow = Math.pow(10,-3);
            minprice = Math.round(minprice*pow)/pow;
            $('#estimated_value').val(minprice)
            $('#smallest_gross').val('ID-'+pos)
        })
    </script>
{% endblock javascripts %}  
